## JS의 부동 소수점 숫자 이해하기. 

---

대부분의 프로그래밍 언어는 여러 종류의 숫자형 데이터를 가지지만 js에는 단 하나밖에 없다. typeof 연산자의 동작을 통해 자바스크립트가 정수형이나 부동 소수점 숫자를 단순히 숫자형으로 분류한다는 사실을 확인할 수 있다.

```javascript
typeof 17; // "number"
typeof 98.6; // "number"
typeof -2.1; // "number"
```

JS 내의 모든 숫자는 IEEE 754 표준에서 64비트로 인코딩된 배정밀도의 부동 소수점, 즉 흔히 'double' 로 알려진 숫자이다. 

double 은 53비트까지의 정확도로 완벽하게 integer 로 표현할 수 있다. ( 모든 integer는 유효한 double 값들이다. 따라서 JS에서 integer 연산은 별도의 integer 형 없이도 완벽하게 가능하다. 

대부분의 산술연산자는 정수형이나 실수 또는 이 둘의 조합으로 동작한다. 

하지만 비트단위 연산자는 특별한 점이 있다. 인자들을 직접 부동 소수점 숫자처럼 처리하지 않고, 암묵적으로 32비트 정수로 변환한다. (정확하게 말하자면 32비트, big-endian, 2의 보수로 처리된다. ) 


<BR><BR>

예1) 비트단위 OR 표현식
  
8 | 1; // 9 

  
이 단순해 보이는 표현식은 몇 가지 평가 단계를 거친다. JS의 숫자 8과 1은 항상 double형이다. 하지만, 32비트 정수형, 즉 32개의 0과 1로도 표현될 수 있다.
  
숫자 8은 다음과 같은 형태가 된다.   
  
00000000000000000000000000001000
  
  
<br><br>
  
#### 🪔모든 비트단위 연산자는 동일한 방식으로 동작한다. 
  
 1. 입력 값을 정수형으로 변환.
 2. 정수 비트 패턴에서 각 연산을 수행
 3. 표준 JS 부동 소수점 숫자 값으로 변환해 결과를 되돌려 준다.
  
  
보통 이런 변환들은 js 엔진에서 별도의 작업을 필요로 한다. 
  
> 숫자 값이 부동 소수점으로 저장되기 때문에, 반드시 정수형으로 변환하고 다시 부동 소수점으로 되돌려야 한다. 하지만 연산 표현식이나 변수가 명시적으로 정수형으로 동작할 때면, 최적화 
 컴파일러가 실행되어 데이터를 내부적으로 정수형으로 저장하고 부가적인 변환을 피하기도 한다.
  
  
<br><br>
  
👏 정리 

  - JS의 숫자는 double-정확도의 부동 소수점 숫자다.
  - JS의 정수는 별개의 데이터형이 아니라 double의 부분집합이다. 
  - 비트단위 연산자는 숫자를 32비트의 부호가 있는 integer처럼 처리한다.
  - 부동 소수점 산순 연산의 정확도에 한계가 있음에 주의해야 한다. 
  
  
